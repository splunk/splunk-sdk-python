[tox]
envlist = py27,py35,py36,py37,pypy,pypy3
skipsdist = {env:TOXBUILD:false}

[testenv]
passenv = LANG
setenv = SPLUNK_HOME=/opt/splunk
         INPUT_EXAMPLE_UPLOAD=/opt/splunk/var/log/splunk/splunkd_ui_access.log
whitelist_externals = true
deps = pytest
       xmlrunner
       unittest2
       unittest-xml-reporting
distdir = build
changedir = tests
#commands_pre = python setup.py dist build
commands =
    {env:TOXBUILD:python -m xmlrunner discover -o ../test-reports/junit-{envname}.xml}
